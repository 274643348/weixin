require=function a(c,r,i){function l(o,e){if(!r[o]){if(!c[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(u)return u(o,!0);var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var s=r[o]={exports:{}};c[o][0].call(s.exports,function(e){return l(c[o][1][e]||e)},s,s.exports,a,c,r,i)}return r[o].exports}for(var u="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({GameConfig:[function(e,o,t){"use strict";cc._RF.push(o,"7db120ARDdF8oQnXzX2+4Rj","GameConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.GameConfig={GameClubButton:null,DEVICE_WIDTH:720,DEVICE_HEIGHT:1280,IS_GAME_MUSIC:!0,GameCore:0,GameHeightScore:0,MAIN_MENU_NUM:"Classic"},cc._RF.pop()},{}],GameTools:[function(e,o,t){"use strict";cc._RF.push(o,"f6582Nvf0VFuJGj30MVSqud","GameTools"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("./GameConfig"),s=function(){function e(){}return e.prototype.getRankData=function(n){console.log("rangkData---------",n),cc.loader.loadRes("panel/RankingListView",function(e,o){if(console.log("rangkData---------",e),!e){var t=cc.instantiate(o);null!=n&&(t.getComponent(cc.Component).shareTicket=n),cc.director.getScene().children[0].addChild(t)}})},e.prototype.removeRankData=function(){cc.sys.platform===cc.sys.WECHAT_GAME?wx.postMessage({messageType:0}):cc.log("移除排行榜数据。")},e.prototype.submitScore=function(e){cc.sys.platform===cc.sys.WECHAT_GAME?wx.postMessage({messageType:3,MAIN_MENU_NUM:n.GameConfig.MAIN_MENU_NUM,score:e}):cc.log("提交得分:"+n.GameConfig.MAIN_MENU_NUM+" : "+e)},e.prototype.getItemByLocalStorage=function(e,o){var t=cc.sys.localStorage.getItem(e);return null==t||""===t?(cc.sys.localStorage.setItem(e,o),o):"boolean"==typeof o?"boolean"==typeof t?t:"true"==t:"number"==typeof o?Number(t):t},e.prototype.playSimpleAudioEngine=function(e){if(n.GameConfig.IS_GAME_MUSIC)switch(e){case 0:cc.audioEngine.play(cc.url.raw("resources/audios/sfx_button.wav"),!1,.5);break;case 1:cc.audioEngine.play(cc.url.raw("resources/audios/sfx_highscore.wav"),!1,.5);break;case 2:cc.audioEngine.play(cc.url.raw("resources/audios/sfx_player_die.wav"),!1,.5);break;case 3:cc.audioEngine.play(cc.url.raw("resources/audios/sfx_player_jump.wav"),!1,.5);break;case 4:cc.audioEngine.play(cc.url.raw("resources/audios/sfx_score.wav"),!1,.5)}},e}();t.gameTools=new s,cc._RF.pop()},{"./GameConfig":"GameConfig"}],GameUiTools:[function(e,o,t){"use strict";cc._RF.push(o,"80c2bRDDYhPV7DSLGLN3J35","GameUiTools"),Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.setButtonClickEvents=function(e,o,t,n,s){void 0===n&&(n="0"),void 0===s&&(s=!0);var a=new Array;null==o.length?a[0]=o:a=o;for(var c=0;c<a.length;c++){var r=new cc.Component.EventHandler;r.target=e.node,r.component=e.node.name,r.handler=t,null==o.length?r.customEventData=n:r.customEventData=""+c;var i=a[c].addComponent(cc.Button);i.clickEvents.push(r),(null==s||s)&&(i.transition=cc.Button.Transition.SCALE,i.duration=.1,i.zoomScale=1.2)}},e}();t.gameUiTools=new n,cc._RF.pop()},{}],Helloworld:[function(e,o,t){"use strict";cc._RF.push(o,"e1b90/rohdEk4SdmmEZANaD","Helloworld"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("./mySDK"),s=e("./GameConfig"),a=e("./GameTools"),c=cc._decorator,r=c.ccclass,i=c.property,l=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.prototype.onLoad=function(){n.setUserCloudStorage({key:"xClassic",value:""+n.getRandomInt(10,1e3)}),this.tex=new cc.Texture2D},o.prototype.start=function(){var e=this;setTimeout(function(){e.loadingResource()},10)},o.prototype.loadingResource=function(){s.GameConfig.IS_GAME_MUSIC=a.gameTools.getItemByLocalStorage("IS_GAME_MUSIC",!0),s.GameConfig.GameHeightScore=a.gameTools.getItemByLocalStorage("GameHeightScore",0),this.initFrameCache(),this.initWxSetting()},o.prototype.initWxSetting=function(){n.showMenu(),s.GameConfig.GameClubButton=n.createGameClub(),s.GameConfig.GameClubButton.show(),a.gameTools.getItemByLocalStorage("UserPlayGame",!0)&&(cc.sys.localStorage.setItem("UserPlayGame",!1),n.setUserCloudStorage({key:"UserPlayGame",value:"1"})),n.LaunchOptions()},o.prototype.initFrameCache=function(){cc.loader.loadRes("watchout",cc.SpriteAtlas,function(e,o){a.gameTools.love2048FrameCache=o})},o.prototype.loginEvent=function(e,o){console.log("ljy------loginevent"),n.login(this.label),n.getSetting(this.touxiang)},o.prototype.GameClubEvent=function(e,o){console.log("ljy------GameClubEvent"),n.createGameClub()},o.prototype.hideMenuEvent=function(e,o){console.log("ljy------hideMenuEvent"),n.hideMenu()},o.prototype.showMenuEvent=function(e,o){},o.prototype.shareEvent=function(e,o){console.log("ljy------shareEvent"),n.shareAppMessage("shareTicket")},o.prototype.getGroupCloudStorage=function(e,o){console.log("ljy------getGroupCloudStorage"),n.my_postMessage("3",""),n.shareAppMessage("shareTicket")},o.prototype.getFriendCloudStorage=function(e,o){console.log("ljy------getFriendCloudStorage"),n.my_postMessage("2",""),a.gameTools.getRankData(null)},o.prototype.getUserCloudStorage=function(e,o){console.log("ljy------getUserCloudStorage"),n.my_postMessage("1","")},__decorate([i(cc.Label)],o.prototype,"label",void 0),__decorate([i(cc.Node)],o.prototype,"touxiang",void 0),__decorate([i(cc.Node)],o.prototype,"opendataRoot",void 0),o=__decorate([r],o)}(cc.Component);t.default=l,cc._RF.pop()},{"./GameConfig":"GameConfig","./GameTools":"GameTools","./mySDK":"mySDK"}],RankingListView:[function(e,o,t){"use strict";cc._RF.push(o,"08264wwBKxFUJnHLzeaPKem","RankingListView"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("../GameUiTools"),s=e("../GameTools"),a=e("../mySDK"),c=e("../GameConfig"),r=cc._decorator,i=r.ccclass,l=r.property,u=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.prototype.onLoad=function(){},o.prototype.start=function(){if(n.gameUiTools.setButtonClickEvents(this,this.backButton,"backButtonFunc"),n.gameUiTools.setButtonClickEvents(this,this.shareButton,"shareButtonFunc"),null!=this.shareTicket){var e=new cc.Node;e.addComponent(cc.Label).string="群排行",e.setPosition(-260,503),this.node.addChild(e)}if(cc.sys.platform===cc.sys.WECHAT_GAME)this.tex=new cc.Texture2D,cc.log(this.shareTicket),null!=this.shareTicket?wx.postMessage({messageType:5,MAIN_MENU_NUM:c.GameConfig.MAIN_MENU_NUM,shareTicket:this.shareTicket}):wx.postMessage({messageType:1,MAIN_MENU_NUM:c.GameConfig.MAIN_MENU_NUM});else{var o=new cc.Node;o.addComponent(cc.Label).string="暂无排行榜数据",this.node.addChild(o),cc.log("获取排行榜数据。"+c.GameConfig.MAIN_MENU_NUM)}},o.prototype._updateSubDomainCanvas=function(){if(cc.sys.platform===cc.sys.WECHAT_GAME){if(!this.tex)return;var e=wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.rankingScrollView.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.tex)}},o.prototype.update=function(){this._updateSubDomainCanvas()},o.prototype.shareButtonFunc=function(e){s.gameTools.playSimpleAudioEngine(4),setTimeout(function(){a.shareAppMessage("shareTicket")},100)},o.prototype.backButtonFunc=function(e){s.gameTools.playSimpleAudioEngine(0),s.gameTools.removeRankData(),cc.sys.platform===cc.sys.WECHAT_GAME&&wx.postMessage({messageType:4,MAIN_MENU_NUM:c.GameConfig.MAIN_MENU_NUM}),this.node.destroy()},__decorate([l(cc.Node)],o.prototype,"backButton",void 0),__decorate([l(cc.Node)],o.prototype,"shareButton",void 0),__decorate([l(cc.Node)],o.prototype,"rankingScrollView",void 0),__decorate([l(String)],o.prototype,"shareTicket",void 0),o=__decorate([i],o)}(cc.Component);t.RankingListView=u,cc._RF.pop()},{"../GameConfig":"GameConfig","../GameTools":"GameTools","../GameUiTools":"GameUiTools","../mySDK":"mySDK"}],mySDK:[function(e,o,t){"use strict";cc._RF.push(o,"5adcfXt8sdMlqqbBr0Qu8un","mySDK"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("./GameTools"),s=e("./GameConfig"),a=0,c=0;function r(n){wx.getUserInfo({success:function(e){console.log("getUserInfo success "),console.log("res is ",e),console.log("在微信登录里面昵称是 :"+e.userInfo.nickName),console.log("用户头像信息 :"+e.userInfo.avatarUrl),cc.loader.load(e.userInfo.avatarUrl+"?aa=aa.jpg",function(e,o){var t=new cc.SpriteFrame;t.setTexture(o),n.getComponent(cc.Sprite).spriteFrame=t})},fail:function(){console.log("getUserInfo fail ")},complete:function(){console.log("getUserInfo complete ")}})}function i(o){console.log("width",a),console.log("height",c);var t=wx.createUserInfoButton({type:"text",text:"获取用户信息",style:{left:a/2-100,top:c/2-20,width:200,height:40,lineHeight:40,backgroundColor:"#ff0000",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}});t.onTap(function(e){e.userInfo?(console.log("用户授权:",e),r(o)):console.log("用户拒绝授权:",e),t.destroy()})}t.login=function(o){wx.login({success:function(e){o.string=""+e.code,e.code?console.log("登录成功！"):console.log("登录失败！"+e.errMsg)}})},t.getSetting=function(o){try{var e=wx.getSystemInfoSync();a=e.screenWidth,c=e.screenHeight}catch(e){console.log("获取系统参数失败")}wx.getSetting({success:function(e){console.log(e.authSetting),e.authSetting["scope.userInfo"]?(console.log("userInfo 已经授权"),r(o)):(console.log("userInfo 未授权"),!1===e.authSetting["scope.userInfo"]?(console.log("用户 userInfo 已经拒绝"),i(o)):wx.authorize({scope:"scope.userInfo",success:function(){console.log("用户 成功 授权"),r(o)},fail:function(){console.log("用户 拒绝 授权")}}))}})},t.getUserInfo=r,t.createUserInfoButton=i,t.createGameClub=function(){console.log("ljy------CreateClub");var e=window.wx.getSystemInfoSync(),o=wx.createGameClubButton({icon:"green",style:{left:e.windowWidth/6,top:91*e.windowHeight/100,width:40,height:40}});return o.hide(),o},t.showMenu=function(){console.log("ljy------showShareMenu"),wx.showShareMenu({withShareTicket:!0})},t.onShareAppMessage=function(){wx.onShareAppMessage(function(){return{title:"玩家手动"}})},t.hideMenu=function(){wx.hideShareMenu()},t.shareAppMessage=function(o){var e="快来跟我一起挑战大鸟撞小鸟吧。";"shareTicket"==o&&(e="看看你在群里排第几？快来和我挑战大鸟撞小鸟吧。"),cc.sys.platform===cc.sys.WECHAT_GAME?wx.shareAppMessage({title:e,query:"x="+s.GameConfig.MAIN_MENU_NUM,success:function(e){null!=e.shareTickets&&0<e.shareTickets.length&&"shareTicket"==o&&wx.postMessage({messageType:5,MAIN_MENU_NUM:s.GameConfig.MAIN_MENU_NUM,shareTicket:e.shareTickets[0]})}}):(this.toastMessage(1),cc.log("执行了截图"+e))},t.LaunchOptions=function(){var e=wx.getLaunchOptionsSync();null!=e.shareTicket&&setTimeout(function(){console.log("shareTicket",e),n.gameTools.getRankData(e.shareTicket)},3e3)},t.getGroupCloudStorage=function(){wx.getGroupCloudStorage({keyList:["score"],success:function(e){console.log("getGroupCloudStorage      success ------",e.data)},fail:function(e){console.log("getGroupCloudStorage      fail ------",e.data)}})},t.getFriendCloudStorage=function(){wx.getFriendCloudStorage({keyList:["score"],success:function(e){console.log("getFriendCloudStorage      success ------",e.data)},fail:function(e){console.log("getFriendCloudStorage      fail ------",e.data)}})},t.getUserCloudStorage=function(e,o){wx.getUserCloudStorage({keyList:[e],success:function(e){console.log("getUserCloudStorage success ---  ",e)}})},t.my_postMessage=function(e,o){},t.setUserCloudStorage=function(e){wx.setUserCloudStorage({KVDataList:[e],success:function(e){console.log("setUserCloudStorage success ---  ",e)},fail:function(e){console.log("setUserCloudStorage fail ---  ",e)}})},t.getRandomInt=function(e,o){var t=Math.ceil(e),n=Math.floor(o);return Math.floor(Math.random()*(n-t))+t},cc._RF.pop()},{"./GameConfig":"GameConfig","./GameTools":"GameTools"}]},{},["GameConfig","GameTools","GameUiTools","Helloworld","mySDK","RankingListView"]);