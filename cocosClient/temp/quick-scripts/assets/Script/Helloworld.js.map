{"version":3,"sources":["Helloworld.ts"],"names":[],"mappings":";;;;;AAAA,iCAeiB;AACjB,2CAA0C;AAC1C,yCAAwC;AAElC,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAAwC,8BAAY;IAApD;;IAiJA,CAAC;IAtIC,2BAAM,GAAN;QAEE,2BAAmB,CAAC,EAAE,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE,EAAE,GAAG,oBAAY,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;QAC7E,IAAI,CAAC,GAAG,GAAG,IAAI,EAAE,CAAC,SAAS,EAAE,CAAC;IAChC,CAAC;IAED,0BAAK,GAAL;QAAA,iBAQC;QANC,WAAW;QACX,UAAU,CAAC;YACT,KAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC,EAAE,EAAE,CAAC,CAAC;IAGT,CAAC;IACD,oCAAe,GAAf;QACE,UAAU;QACV,uBAAU,CAAC,aAAa,GAAG,qBAAS,CAAC,qBAAqB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAClF,uBAAU,CAAC,eAAe,GAAG,qBAAS,CAAC,qBAAqB,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;QACnF,YAAY;QACZ,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,WAAW;QACX,mDAAmD;QACnD,qCAAqC;QACrC,MAAM;IACR,CAAC;IAED,UAAU;IACV,kCAAa,GAAb;QACE,gBAAgB;QAChB,gBAAQ,EAAE,CAAC;QAEX,KAAK;QACL,uBAAU,CAAC,cAAc,GAAG,sBAAc,EAAE,CAAC;QAC7C,uBAAU,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;QAEjC,gBAAgB;QAChB,IAAI,qBAAS,CAAC,qBAAqB,CAAC,cAAc,EAAE,IAAI,CAAC,EAAE;YACzD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;YACnD,iBAAiB;YACjB,2BAAmB,CAAC,EAAC,GAAG,EAAE,cAAc,EAAE,KAAK,EAAE,GAAG,EAAC,CAAC,CAAC;SACxD;QACC,eAAe;QACf,qBAAa,EAAE,CAAC;IAGpB,CAAC;IAGD,mCAAc,GAAd;QACE,MAAM;QACN,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,WAAW,EAAE,UAAU,GAAG,EAAE,KAAK;YAC9D,qBAAS,CAAC,kBAAkB,GAAG,KAAK,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,OAAO;QACP,mCAAmC;QACnC,gHAAgH;QAChH,iCAAiC;QACjC,mCAAmC;QACnC,2BAA2B;QAC3B,oCAAoC;IACtC,CAAC;IAED,gBAAgB;IAChB,4BAA4B;IAC5B,qBAAqB;IACrB,cAAc;IACd,MAAM;IACN,mDAAmD;IACnD,+CAA+C;IAC/C,4CAA4C;IAC5C,oCAAoC;IACpC,gFAAgF;IAChF,eAAe;IACf,OAAO;IACP,IAAI;IACJ,aAAa;IACb,kCAAkC;IAClC,IAAI;IAEJ,+BAAU,GAAV,UAAW,KAA0B,EAAE,eAAoB;QACzD,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QACnC,aAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAElB,kBAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAE1B,OAAO;QACP,qEAAqE;QACrE,sDAAsD;QACtD,4CAA4C;QAC5C,uCAAuC;QACvC,6BAA6B;QAC7B,6DAA6D;QAC7D,MAAM;IACR,CAAC;IAED,kCAAa,GAAb,UAAc,KAA0B,EAAE,eAAoB;QAC5D,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;QACtC,sBAAc,EAAE,CAAC;IACnB,CAAC;IAED,kCAAa,GAAb,UAAc,KAA0B,EAAE,eAAoB;QAC5D,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;QACtC,gBAAQ,EAAE,CAAC;IACb,CAAC;IAED,kCAAa,GAAb,UAAc,KAA0B,EAAE,eAAoB;IAE9D,CAAC;IAED,+BAAU,GAAV,UAAW,KAA0B,EAAE,eAAoB;QACzD,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QACnC,uBAAe,CAAC,aAAa,CAAC,CAAC;IACjC,CAAC;IAED,yCAAoB,GAApB,UAAqB,KAA0B,EAAE,eAAoB;QACnE,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;QAC7C,sBAAc,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QACxB,uBAAe,CAAC,aAAa,CAAC,CAAC;IACjC,CAAC;IAED,0CAAqB,GAArB,UAAsB,KAA0B,EAAE,eAAoB;QACpE,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;QAC9C,sBAAc,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAExB,qBAAS,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IAED,wCAAmB,GAAnB,UAAoB,KAA0B,EAAE,eAAoB;QAClE,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;QAC5C,sBAAc,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;IAC1B,CAAC;IA9ID;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6CACH;IAGhB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACA;IAGlB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;oDACI;IARH,UAAU;QAD9B,OAAO;OACa,UAAU,CAiJ9B;IAAD,iBAAC;CAjJD,AAiJC,CAjJuC,EAAE,CAAC,SAAS,GAiJnD;kBAjJoB,UAAU","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import {\n  getFriendCloudStorage,\n  createGameClub,\n  getGroupCloudStorage,\n  getRandomInt,\n  getSetting,\n  getUserCloudStorage,\n  getUserInfo,\n  hideMenu,\n  login,\n  my_postMessage,\n  setUserCloudStorage,\n  shareAppMessage,\n  showMenu,\n  LaunchOptions,\n} from './mySDK';\nimport { GameConfig } from './GameConfig';\nimport { gameTools } from './GameTools';\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Helloworld extends cc.Component {\n  @property(cc.Label)\n  label: cc.Label;\n\n  @property(cc.Node)\n  touxiang: cc.Node;\n\n  @property(cc.Node)\n  opendataRoot: cc.Node;\n\n  private tex: cc.Texture2D;\n  onLoad() {\n    \n    setUserCloudStorage({ key: \"xClassic\", value: \"\" + getRandomInt(10, 1000) });\n    this.tex = new cc.Texture2D();\n  }\n\n  start() {\n\n    //111111111\n    setTimeout(() => {\n      this.loadingResource();\n    }, 10);\n\n\n  }\n  loadingResource(){\n    //22222222\n    GameConfig.IS_GAME_MUSIC = gameTools.getItemByLocalStorage(\"IS_GAME_MUSIC\", true);\n    GameConfig.GameHeightScore = gameTools.getItemByLocalStorage(\"GameHeightScore\", 0);\n    // 提前记载需要的图集\n    this.initFrameCache();\n    this.initWxSetting();\n    //加载并切换到主界面\n    // cc.director.preloadScene(\"MenuUI\", function () {\n    //   cc.director.loadScene(\"MenuUI\");\n    // });\n  }\n\n  //33333333\n  initWxSetting(){\n    //右上角“...”显示分享按钮\n    showMenu();\n\n    //游戏圈\n    GameConfig.GameClubButton = createGameClub();\n    GameConfig.GameClubButton.show();\n\n    //对用户托管数据进行写数据操作\n    if (gameTools.getItemByLocalStorage(\"UserPlayGame\", true)) {\n      cc.sys.localStorage.setItem(\"UserPlayGame\", false);\n      // 对用户托管数据进行写数据操作\n      setUserCloudStorage({key: \"UserPlayGame\", value: \"1\"});\n    }\n      // 获取小游戏启动时的参数。\n      LaunchOptions();\n\n\n  }\n\n\n  initFrameCache(){\n    //加载图集\n    cc.loader.loadRes(\"watchout\", cc.SpriteAtlas, function (err, atlas) {\n        gameTools.love2048FrameCache = atlas;\n    });\n\n    // 使用图集\n    // let messageBack = new cc.Node();\n    // messageBack.addComponent(cc.Sprite).spriteFrame = GameTools.love2048FrameCache.getSpriteFrame(\"messageBox0\");\n    // messageBack.setPosition(x, y);\n    // messageBack.rotation = rotation;\n    // messageBack.opacity = 0;\n    // parentNode.addChild(messageBack);\n  }\n\n  // // 刷新开放数据域的纹理\n  // updateSubDomainCanvas() {\n  //   if (!this.tex) {\n  //     return;\n  //   }\n  //   var openDataContext = wx.getOpenDataContext();\n  //   var sharedCanvas = openDataContext.canvas;\n  //   this.tex.initWithElement(sharedCanvas);\n  //   this.tex.handleLoadedTexture();\n  //   this.opendataRoot.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(\n  //     this.tex\n  //   );\n  // }\n  // update() {\n  //   this.updateSubDomainCanvas();\n  // }\n\n  loginEvent(event: cc.Event.EventTouch, customEventData: any) {\n    console.log(\"ljy------loginevent\");\n    login(this.label);\n\n    getSetting(this.touxiang);\n\n    //域名被限制\n    // var remoteUrl = \"http://172.16.0.143:8080/static/img/tuoyuan.png\";\n    // cc.loader.load(remoteUrl, function (err, texture) {\n    //     // Use texture to create sprite frame\n    //     const sf = new cc.SpriteFrame();\n    //     sf.setTexture(texture)\n    //     this.touxiang.getCompment(cc.Sprite).SpriteFrame = sf;\n    // });\n  }\n\n  GameClubEvent(event: cc.Event.EventTouch, customEventData: any) {\n    console.log(\"ljy------GameClubEvent\");\n    createGameClub();\n  }\n\n  hideMenuEvent(event: cc.Event.EventTouch, customEventData: any) {\n    console.log(\"ljy------hideMenuEvent\");\n    hideMenu();\n  }\n\n  showMenuEvent(event: cc.Event.EventTouch, customEventData: any) {\n    \n  }\n\n  shareEvent(event: cc.Event.EventTouch, customEventData: any) {\n    console.log(\"ljy------shareEvent\");\n    shareAppMessage(\"shareTicket\");\n  }\n\n  getGroupCloudStorage(event: cc.Event.EventTouch, customEventData: any) {\n    console.log(\"ljy------getGroupCloudStorage\");\n    my_postMessage(\"3\", \"\");\n    shareAppMessage(\"shareTicket\");\n  }\n\n  getFriendCloudStorage(event: cc.Event.EventTouch, customEventData: any) {\n    console.log(\"ljy------getFriendCloudStorage\");\n    my_postMessage(\"2\", \"\");\n\n    gameTools.getRankData(null);\n  }\n\n  getUserCloudStorage(event: cc.Event.EventTouch, customEventData: any) {\n    console.log(\"ljy------getUserCloudStorage\");\n    my_postMessage(\"1\", \"\");\n  }\n}\n"]}